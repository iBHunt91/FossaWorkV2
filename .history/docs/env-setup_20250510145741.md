# Environment Variables Setup

This document explains how to set up environment variables for the Fossa Monitor application.

## Recommended: Configure Email via .env

For sending email notifications, it is **strongly recommended** to configure your SMTP server details using environment variables. Create a file named `.env` in the root directory of the project with the following variables:

```bash
# Email Configuration (Recommended)
SMTP_HOST=your_smtp_host
SMTP_PORT=your_smtp_port (e.g., 587 for TLS, 465 for SSL)
SMTP_USER=your_smtp_username
SMTP_PASS=your_smtp_password_or_app_token
SMTP_FROM_EMAIL=your_sender_email_address
SMTP_SECURE=true # Set to true if your_smtp_port is 465 (SSL), false or omit for TLS on 587

# Application Mode
RUNNING_ELECTRON_DEV=true # Set to true for development, false for production
NODE_ENV=development # 'development' or 'production'

# Server Configuration (Optional - Defaults to 3000 if not set)
PORT=3000
```

**Note:** Using an app-specific password or token for `SMTP_PASS` is more secure than using your main account password.

Using `.env` variables is the most secure way to handle email credentials and avoids hardcoding them in configuration files.

## User Authentication (FOSSA Credentials)

FOSSA credentials (for accessing the WorkFossa platform) are managed **per user** through the application's user management system. Each user will configure their own FOSSA credentials when they are set up within the application. This system supports multiple users, each with their own FOSSA account, ensuring data isolation and proper access.

## Fallback Email Configuration (Not Recommended for Credentials)

The application can also use a default `data/email-settings.json` file if the `.env` variables for SMTP are not fully configured. However, **do not store sensitive credentials like passwords in this JSON file.**

Each user configures their own **recipient email address** through the application interface.

## Server and Application Mode

- `PORT`: Specifies the port the application server will run on. Defaults to `3000` if not set in `.env`.
- `NODE_ENV`: Set to `development` for development-specific features (like more verbose logging) and `production` for optimized production builds.
- `RUNNING_ELECTRON_DEV`: Set to `true` when running in Electron development mode. This typically enables features like developer tools. Set to `false` for production builds.

## Setting Up for Production

For production environments, ensure your `.env` file contains:

```bash
SMTP_HOST=your_production_smtp_host
SMTP_PORT=your_production_smtp_port
SMTP_USER=your_production_smtp_username
SMTP_PASS=your_production_smtp_password
SMTP_FROM_EMAIL=your_production_sender_email_address
SMTP_SECURE= # true or false based on port

RUNNING_ELECTRON_DEV=false
NODE_ENV=production
PORT= # Optional, if different from 3000
```

## Notes

- The application prioritizes SMTP settings from the `.env` file.
- If `.env` SMTP variables are incomplete or missing, it may fall back to `data/email-settings.json` (primarily for host/port if not for credentials).
- User-specific settings (like recipient email addresses and FOSSA credentials) are stored in the `data/users/{username}/` directory.

## About User Authentication

FOSSA credentials are managed at the user level through the application's user management system. Each user will configure their own credentials when they are set up in the application. This supports multiple users each with their own FOSSA account.

## Email Configuration

The application comes with a pre-configured central email account to send notifications to users:

```
FossaMonitor Email: fossamonitor@gmail.com
App Password: febc emgq dvky yafs
SMTP: smtp.gmail.com:587
```

This account is already configured in the system and ready to use. You don't need to modify these settings.

Each user configures their own recipient email address through the application interface.

## Server Configuration

Server configuration is pre-configured in the application. These settings should not need to be changed by end users:

```bash
PORT=3000
NODE_ENV=development
```

## Setting Up for Production

For production environments, you may want to adjust these settings:

```bash
RUNNING_ELECTRON_DEV=false
NODE_ENV=production
```